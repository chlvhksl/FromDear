(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{8381:function(e,t,r){Promise.resolve().then(r.bind(r,9463))},9463:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(7437),n=r(2265),a=r(2141),l=r(9376);function i(){let[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(!1),[o,u]=(0,n.useState)(null),c=(0,l.useRouter)();(0,n.useEffect)(()=>{(async()=>{let{data:{session:e}}=await a.O.auth.getSession();if(!e){c.push("/auth");return}u(e.user)})()},[c]);let d=()=>{let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let r=0;r<8;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},h=async t=>{t.preventDefault(),i(!0);try{let t="",r=!1;for(;!r;){t=d();let{data:e}=await a.O.from("users").select("link_id").eq("link_id",t).single();e||(r=!0)}let{error:s}=await a.O.from("users").insert({id:o.id,username:e,link_id:t,created_at:new Date().toISOString()});if(s)throw s;c.push("/dashboard")}catch(e){console.error("Error:",e),alert("오류가 발생했습니다. 다시 시도해주세요.")}finally{i(!1)}};return(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-green-50 flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-8 border border-red-100",children:[(0,s.jsxs)("div",{className:"text-center mb-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"반가워요! \uD83D\uDC4B"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["선물함에 사용할 이름을",(0,s.jsx)("br",{}),"정해주세요."]})]}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"내 이름 (또는 별명)"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,maxLength:20,placeholder:"예: 산타할아버지, 루돌프",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all text-center text-lg font-bold"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"* 영문, 한글, 숫자 모두 가능해요 (20자 이내)"})]}),(0,s.jsx)("button",{type:"submit",disabled:r||!e.trim(),className:"w-full py-4 bg-gradient-to-r from-red-600 to-green-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-lg",children:r?"저장 중...":"시작하기 \uD83D\uDE80"})]})]})})}},2141:function(e,t,r){"use strict";r.d(t,{O:function(){return l}});var s=r(338);let n="https://vlydnlmwwhofsksikaeh.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZseWRubG13d2hvZnNrc2lrYWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3ODQ0NzEsImV4cCI6MjA3ODM2MDQ3MX0.XA5pvZRRAVd5h3q1g4iJ0Muibadb1gIKbSBnuW9lu78";n&&a||console.warn("Supabase environment variables are not set");let l=(0,s.createBrowserClient)(n,a)},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[338,971,117,744],function(){return e(e.s=8381)}),_N_E=e.O()}]);